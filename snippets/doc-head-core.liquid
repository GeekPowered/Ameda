<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>
  {%- if request.page_type == 'password' -%}
    {{- shop.name -}}
  {%- else -%}
    {{- page_title -}}
    {%- if current_tags %}{% assign meta_tags = current_tags | join: ', ' %} &ndash; {{ 'general.meta.tags' | t: tags: meta_tags }}{% endif -%}
    {%- if current_page != 1 %} &ndash; {{ 'general.meta.page' | t: page: current_page }}{% endif -%}
    {%- unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless -%}
  {%- endif -%}
</title>

{%- if page_description -%}
  <meta name="description" content="{{ page_description | escape }}">
{%- endif -%}

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Get the current tags
    var currentTags = {{ current_tags | json }};
    console.log("Current Tags: ", currentTags);

    // Fetch and log metaobject values for the current tag
    {% assign blog_tag = shop.metaobjects['blog_category_seo'].values | where: 'tag_slug', current_tags.first | first %}
    
    {% if blog_tag %}
      var metaObject = {
        tagSlug: "{{ blog_tag.tag_slug }}",
        seoTitle: "{{ blog_tag.seo_title }}",
        seoMeta: "{{ blog_tag.seo_meta }}"
      };
      console.log("Matched Metaobject: ", metaObject);
    {% else %}
      console.log("No matching metaobject found for the current tag.");
    {% endif %}
  });
</script>


{%- if canonical_url != blank -%}
  <link rel="canonical" href="{{ canonical_url | split: '?' | first }}">
{%- endif -%}

{% if template == 'page' %}
  {% if page.metafields.page.noindex == true %}
    <meta name="robots" content="noindex, nofollow" />
  {% endif %}
{% endif %}

{%- if settings.favicon != blank -%}
  {%- liquid
    assign image_type = settings.favicon | split: '?' | first | split: '.' | last | downcase
    if image_type == 'svg'
      assign image_type = 'svg+xml'
    endif
  -%}
  <link rel="icon" href="{{ settings.favicon | image_url: width: 48, height: 48 }}" type="image/{{ image_type }}">
  <link rel="apple-touch-icon" href="{{ settings.favicon | image_url: width: 180, height: 180 }}">
{%- endif -%}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "MedicalOrganization",
  "name": "Ameda",
  "url": "https://www.ameda.com/",
  "logo": "https://www.ameda.com/cdn/shop/files/ameda-logo.webp?v=1703714431&width=200",
  "sameAs": [
    "{{ settings.social_facebook_url }}",
    "{{ settings.social_twitter_url }}",
    "{{ settings.social_instagram_url }}",
    "{{ settings.social_youtube_url }}",
    "https://www.pinterest.com/myameda/_created/",
    "{{ settings.social_tiktok_url }}"
  ]
}
</script>