<link rel="stylesheet" href="{{ 'instructions-for-use.css' | asset_url }}" media="print" onload="this.media='all'">

<div class="section section--padded color-scheme" style="margin-top: 0; margin-bottom: 0; padding-bottom:0;">
    <div class="container">
        <div class="tabs-wrapper flex justify-center gap-theme flex-wrap">
            {% assign used_tab_names = '' %}
            
            <!-- Create two arrays to store tabs containing "pump" and others -->
            {% assign tabs_with_pump = '' | split: ',' %}
            {% assign other_tabs = '' | split: ',' %}
            
            {% for instruction in shop.metaobjects.instructions.values %}
                {% unless used_tab_names contains instruction.tab_name %}
                    {% if instruction.tab_name contains 'pump' %}
                        {% capture tabs_with_pump %}{{ tabs_with_pump }}{{ instruction.tab_name }},{% endcapture %}
                    {% else %}
                        {% capture other_tabs %}{{ other_tabs }}{{ instruction.tab_name }},{% endcapture %}
                    {% endif %}
                    
                    {% capture used_tab_names %}{{ used_tab_names }}{{ instruction.tab_name }},{% endcapture %}
                {% endunless %}
            {% endfor %}
            
            <!-- Sort the tabs alphabetically, then concatenate the two arrays -->
            {% assign sorted_tabs_with_pump = tabs_with_pump | split: ',' | sort %}
            {% assign sorted_other_tabs = other_tabs | split: ',' | sort %}
            {% assign all_sorted_tabs = sorted_tabs_with_pump | concat: sorted_other_tabs %}
            
            <!-- Iterate through the sorted tabs to display buttons -->
            {% for tab_name in all_sorted_tabs %}
                {% if tab_name != '' %}
                    <button class="btn btn--secondary">{{ tab_name }}</button>
                {% endif %}
            {% endfor %}
        </div>
    </div>
</div>

<div class="section section--padded" style="margin-top: 0; padding-top:0;">
    <div class="container">
        <div class="instructions-index">
            {% for instruction in shop.metaobjects.instructions.values %}
                <div class="instruction-item" tabName="{{ instruction.tab_name }}">
                    <div class="instruction-image-wrapper">
                        <img src="{{ instruction.product_image |  image_url }}" />
                    </div>
                    <h3 class="h5 m-0">{{ instruction.name }}</h3>
                    {% if instruction.downloads.value.size > 0 %}
                        <p class="instruction-dd-label">Downloads</p>
                        <select name="{{ instruction.name }}-downloads">
                            <option>Select Download</option>
                            {% for download in instruction.downloads.value %}
                                <option value="{{ download.file }}">{{ download.language }}</option>
                            {% endfor %}
                        </select>
                    {% endif %}
                    {% if instruction.videos.value.size > 0 %}
                        <p class="instruction-dd-label">Video</p>
                        <select name="{{ instruction.name }}-videos">
                            <option>Select Video</option>
                            {% for video in instruction.videos.value %}
                                <option value="{{ video.link }}">{{ video.title }}</option>
                            {% endfor %}
                        </select>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>
</div>


<script src="{{ 'instructions-for-use.js' | asset_url }}" defer="defer"></script>


{% schema %}
    {
      "name": "Instructions For Use",
      "presets": [
        {
          "name": "Instructions For Use",
          "category": "Template"
        }
      ]
    }
{% endschema %}